<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Study Planner - King's College London</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: linear-gradient(135deg, #e52d27 0%, #b31217 100%);
      min-height: 100vh;
      padding: 20px;
    }
    .container {
      max-width: 1000px;
      margin: 0 auto;
      background: white;
      border-radius: 24px;
      box-shadow: 0 30px 90px rgba(0,0,0,0.3);
      overflow: hidden;
    }
    .header {
      background: linear-gradient(135deg, #e52d27 0%, #b31217 100%);
      color: white;
      padding: 60px 40px;
      text-align: center;
    }
    .header h1 { font-size: 36px; margin-bottom: 12px; font-weight: 700; }
    .header .subtitle { font-size: 18px; opacity: 0.95; }
    .header .uni-name { margin-top: 15px; font-size: 13px; font-weight: 600; letter-spacing: 2px; opacity: 0.85; }
    .content { padding: 50px 40px; }
    .intro-text {
      background: #f8f9fa;
      padding: 24px;
      border-radius: 12px;
      margin-bottom: 30px;
      border-left: 4px solid #e52d27;
      color: #495057;
      line-height: 1.7;
    }
    .form-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 24px;
      margin-bottom: 30px;
    }
    .input-group { position: relative; }
    label {
      display: block;
      margin-bottom: 10px;
      font-weight: 600;
      color: #212529;
      font-size: 15px;
    }
    select, input[type="number"] {
      width: 100%;
      padding: 16px;
      border: 2px solid #dee2e6;
      border-radius: 10px;
      font-size: 16px;
      transition: all 0.3s ease;
      background: white;
      font-weight: 500;
    }
    select:focus, input[type="number"]:focus {
      outline: none;
      border-color: #e52d27;
      box-shadow: 0 0 0 4px rgba(229, 45, 39, 0.1);
    }
    .helper-text { font-size: 13px; color: #6c757d; margin-top: 6px; }
    .work-schedule-insight {
      background: linear-gradient(135deg, #e8f4f8 0%, #d4e9f2 100%);
      padding: 16px;
      border-radius: 8px;
      margin-top: 10px;
      border-left: 3px solid #17a2b8;
      font-size: 14px;
      color: #0c5460;
      font-weight: 500;
    }
    .calculate-btn {
      width: 100%;
      padding: 18px;
      background: linear-gradient(135deg, #e52d27 0%, #b31217 100%);
      color: white;
      border: none;
      border-radius: 12px;
      font-size: 18px;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.3s ease;
      margin-top: 20px;
      box-shadow: 0 8px 20px rgba(229, 45, 39, 0.25);
    }
    .calculate-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 12px 30px rgba(229, 45, 39, 0.35);
    }
    .results {
      margin-top: 40px;
      display: none;
      animation: fadeInUp 0.6s ease-out;
    }
    .results.show { display: block; }
    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(30px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .results-header { text-align: center; margin-bottom: 40px; }
    .results-header h2 { font-size: 32px; color: #212529; margin-bottom: 8px; font-weight: 700; }
    .stats-showcase {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 20px;
      margin-bottom: 40px;
    }
    .stat-box {
      background: linear-gradient(135deg, #fff 0%, #f8f9fa 100%);
      padding: 24px;
      border-radius: 12px;
      text-align: center;
      border: 2px solid #e9ecef;
      transition: all 0.3s ease;
    }
    .stat-box:hover {
      border-color: #e52d27;
      transform: translateY(-4px);
      box-shadow: 0 8px 20px rgba(0,0,0,0.08);
    }
    .stat-label {
      font-size: 12px;
      color: #6c757d;
      margin-bottom: 8px;
      text-transform: uppercase;
      letter-spacing: 1px;
      font-weight: 600;
    }
    .stat-value { font-size: 36px; font-weight: 800; color: #e52d27; }
    .chart-container { background: #f8f9fa; padding: 30px; border-radius: 16px; margin: 40px auto; max-width: 600px; }
    .chart-title { font-size: 16px; font-weight: 700; color: #212529; margin-bottom: 20px; text-align: center; }
    .chart-wrapper { position: relative; height: 280px; }
    .recommendation {
      background: linear-gradient(135deg, #fff5f5 0%, #ffe8e8 100%);
      padding: 35px;
      border-radius: 16px;
      border-left: 6px solid #e52d27;
      margin-bottom: 30px;
    }
    .recommendation-title {
      font-size: 24px;
      font-weight: 700;
      color: #e52d27;
      margin-bottom: 16px;
    }
    .programme-suggestions {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }
    .programme-card {
      background: white;
      padding: 20px;
      border-radius: 12px;
      border: 2px solid #e52d27;
      transition: all 0.3s ease;
    }
    .programme-card:hover { transform: translateY(-4px); box-shadow: 0 8px 20px rgba(229,45,39,0.2); }
    .programme-name { font-size: 16px; font-weight: 700; color: #e52d27; margin-bottom: 8px; }
    .programme-details { font-size: 14px; color: #495057; line-height: 1.6; }
    .btn {
      padding: 16px 24px;
      border-radius: 10px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      border: none;
      text-align: center;
    }
    .btn-primary {
      background: linear-gradient(135deg, #e52d27 0%, #b31217 100%);
      color: white;
      box-shadow: 0 4px 12px rgba(229,45,39,0.25);
    }
    .btn-secondary {
      background: white;
      color: #e52d27;
      border: 2px solid #e52d27;
    }
    .btn-secondary:hover { background: #e52d27; color: white; }
    /* Weekly grid styles */
    .weekly-grid {
      display: grid;
      grid-template-columns: 60px repeat(7, 1fr);
      grid-auto-rows: 26px;
      border: 1px solid #dee2e6;
      user-select: none;
      margin-top: 15px;
    }
    .grid-header {
      background: #f8f9fa;
      border: 1px solid #dee2e6;
      font-size: 12px;
      text-align: center;
      line-height: 26px;
      font-weight: 600;
    }
    .grid-cell {
      border: 1px solid #f1f1f1;
      text-align: center;
      cursor: pointer;
      transition: background 0.15s ease;
      font-size: 11px;
    }
    .grid-cell.study { background: #28a745; color: white; }
    .grid-cell.work { background: #e52d27; color: white; }
    .grid-cell.sleep { background: #6c757d; color: white; }
    .grid-cell.family { background: #ff6b6b; color: white; }
    .grid-cell.social { background: #ffc107; color: #212529; font-weight:600; }
    .grid-cell.other { background: #96ceb4; color: white; }
    .grid-cell:hover { opacity: 0.85; }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>Study Planner</h1>
      <div class="subtitle">Realistic recommendations for your schedule</div>
      <div class="uni-name">KING'S COLLEGE LONDON</div>
    </div>
    <div class="content">
      <div class="intro-text">
        <p><strong>Get realistic study recommendations.</strong> Finding your available study time by factoring in commutes, downtime, and commitments.</p>
      </div>
      <form id="calculatorForm">
        <!-- existing form fields -->
        <div class="form-grid">
          <div class="input-group">
            <label>Work & Commute Schedule</label>
            <select id="workSchedule" required>
              <option value="">Select your work schedule</option>
              <option value="part-time" data-hours="20">Part Time: 4 hrs/day (20 hrs/week)</option>
              <option value="short" data-hours="30">Short: 6 hrs/day (30 hrs/week)</option>
              <option value="standard" data-hours="40" selected>Standard: 8 hrs/day (40 hrs/week)</option>
              <option value="extended" data-hours="50">Extended: 10 hrs/day (50 hrs/week)</option>
              <option value="long" data-hours="60">Long: 12 hrs/day (60 hrs/week)</option>
            </select>
            <div class="helper-text">Includes commute time, automatically scheduled Mon-Fri</div>
          </div>
          <div class="input-group">
            <label>Sleep Schedule</label>
            <select id="sleepSchedule" required>
              <option value="">Select your sleep pattern</option>
              <option value="short" data-hours="42">Short: 6 hrs/night (42 hrs/week)</option>
              <option value="light" data-hours="49">Light: 7 hrs/night (49 hrs/week)</option>
              <option value="standard" data-hours="56" selected>Standard: 8 hrs/night (56 hrs/week)</option>
              <option value="good" data-hours="63">Good: 9 hrs/night (63 hrs/week)</option>
              <option value="excellent" data-hours="70">Excellent: 10 hrs/night (70 hrs/week)</option>
            </select>
            <div class="helper-text">Automatically scheduled every night 11pm-7am (adjusts for your choice)</div>
          </div>
        </div>
        <button type="submit" class="calculate-btn">Generate Study Plan</button>
      </form>

      <div id="results" class="results">
        <div class="results-header">
          <h2>Your Realistic Study Plan</h2>
          <p>Based on your actual schedule</p>
        </div>
        <div class="stats-showcase">
          <div class="stat-box"><div class="stat-label">Weekly</div><div class="stat-value" id="weeklyHours">0h</div></div>
          <div class="stat-box"><div class="stat-label">Daily Avg</div><div class="stat-value" id="dailyHours">0h</div></div>
          <div class="stat-box"><div class="stat-label">Monthly</div><div class="stat-value" id="monthlyHours">0h</div></div>
        </div>
        <div class="chart-container">
          <div class="chart-title">Weekly Time Allocation</div>
          <div class="chart-wrapper"><canvas id="pieChart"></canvas></div>
        </div>
      </div>

      <!-- 🗓️ Weekly Visual Planner -->
      <div id="visualPlanner" style="display:none; margin-top:40px;">
        <h2 style="text-align:center; color:#212529; margin-bottom:20px;">🗓️ Your Weekly Schedule Builder</h2>
        <div style="background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%); padding: 20px; border-radius: 12px; margin-bottom: 20px;">
          <p style="text-align:center; color:#495057; margin-bottom:15px; font-weight:500;">
            ✨ <strong>Work & Sleep</strong> are automatically scheduled. Now add your personal commitments and study sessions!
          </p>
          <div style="display:flex; justify-content:center; gap:20px; flex-wrap:wrap; margin-bottom:15px;">
            <div style="display:flex; align-items:center; gap:8px;">
              <div style="width:16px; height:16px; background:#e52d27; border-radius:3px;"></div>
              <span style="font-size:14px; color:#495057;">Work (Auto)</span>
            </div>
            <div style="display:flex; align-items:center; gap:8px;">
              <div style="width:16px; height:16px; background:#6c757d; border-radius:3px;"></div>
              <span style="font-size:14px; color:#495057;">Sleep (Auto)</span>
            </div>
            <div style="display:flex; align-items:center; gap:8px;">
              <div style="width:16px; height:16px; background:#28a745; border-radius:3px;"></div>
              <span style="font-size:14px; color:#495057;">Study (You add)</span>
            </div>
            <div style="display:flex; align-items:center; gap:8px;">
              <div style="width:16px; height:16px; background:#ff6b6b; border-radius:3px;"></div>
              <span style="font-size:14px; color:#495057;">Family (You add)</span>
            </div>
            <div style="display:flex; align-items:center; gap:8px;">
              <div style="width:16px; height:16px; background:#ffc107; border-radius:3px;"></div>
              <span style="font-size:14px; color:#495057;">Social (You add)</span>
            </div>
            <div style="display:flex; align-items:center; gap:8px;">
              <div style="width:16px; height:16px; background:#96ceb4; border-radius:3px;"></div>
              <span style="font-size:14px; color:#495057;">Other (You add)</span>
            </div>
          </div>
        </div>
        
        <div style="display:flex; justify-content:center; align-items:center; gap:20px; margin-bottom:20px; flex-wrap:wrap;">
          <div style="display:flex; align-items:center; gap:10px;">
            <label style="font-weight:600; color:#212529;">🎨 Paint with:</label>
            <select id="activitySelect" style="padding:10px 16px; border-radius:10px; border:2px solid #dee2e6; font-size:16px; background:white; min-width:200px;">
              <option value="study" selected>📚 Study Sessions</option>
              <option value="family">👨‍👩‍👧‍👦 Family Time</option>
              <option value="social">🎉 Social & Fun</option>
              <option value="other">📋 Other Commitments</option>
            </select>
          </div>
          <div style="display:flex; gap:10px;">
            <button id="clearAll" class="btn btn-secondary" style="padding:10px 20px;">🧹 Clear All</button>
            <button id="clearPersonal" class="btn btn-secondary" style="padding:10px 20px;">🎨 Clear Personal Only</button>
            <button id="smartSuggest" class="btn btn-primary" style="padding:10px 20px;">✨ Smart Suggestions</button>
          </div>
        </div>
        
        <div style="background:white; padding:20px; border-radius:12px; box-shadow:0 4px 12px rgba(0,0,0,0.1);">
          <p style="text-align:center; margin-bottom:15px; color:#6c757d; font-style:italic;">
            💡 <strong>Tip:</strong> Click and drag to quickly fill time slots. Right-click to remove activities.
          </p>
          <div id="weeklyGrid" class="weekly-grid"></div>
        </div>
        
        <div id="scheduleStats" style="display:none; margin-top:20px; background: linear-gradient(135deg, #e8f5e8 0%, #d4edda 100%); padding:20px; border-radius:12px; border-left:4px solid #28a745;">
          <h3 style="color:#155724; margin-bottom:10px;">📊 Your Schedule Breakdown</h3>
          <div style="display:grid; grid-template-columns:repeat(auto-fit, minmax(150px, 1fr)); gap:15px;" id="activityBreakdown"></div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // existing calculator
    document.getElementById('calculatorForm').addEventListener('submit', function(e) {
      e.preventDefault();
      
      const workSchedule = document.getElementById('workSchedule');
      const sleepSchedule = document.getElementById('sleepSchedule');
      
      if (!workSchedule.value || !sleepSchedule.value) {
        alert('Please select both work and sleep schedules');
        return;
      }
      
      const work = parseInt(workSchedule.selectedOptions[0].dataset.hours);
      const sleep = parseInt(sleepSchedule.selectedOptions[0].dataset.hours);
      
      const totalCommitted = work + sleep;
      let available = 168 - totalCommitted;
      if (available < 0) available = 0;
      
      document.getElementById('weeklyHours').textContent = available.toFixed(0) + 'h';
      document.getElementById('dailyHours').textContent = (available/7).toFixed(1) + 'h';
      document.getElementById('monthlyHours').textContent = (available*4.33).toFixed(0) + 'h';
      
      createChart(work, sleep, available);
      populateSchedule(workSchedule.value, sleepSchedule.value);
      
      document.getElementById('results').classList.add('show');
      document.getElementById('visualPlanner').style.display='block';
      
      // Add event listeners for planner after it's visible
      setTimeout(() => {
        addPlannerEventListeners();
        document.getElementById('results').scrollIntoView({behavior:'smooth'});
      }, 100);
    });

    let pieChart;
    function createChart(work, sleep, available){
      const ctx=document.getElementById('pieChart').getContext('2d');
      if(pieChart) pieChart.destroy();
      pieChart=new Chart(ctx,{
        type:'doughnut',
        data:{
          labels:['Work & Commute','Sleep','Available for Study'],
          datasets:[{data:[work, sleep, available],
            backgroundColor:['#e52d27','#6c757d','#28a745'],
            borderWidth:0}]},
        options:{plugins:{legend:{position:'bottom'}}}
      });
    }

    // Weekly grid logic
    function initWeeklyGrid() {
      const grid=document.getElementById('weeklyGrid');
      const days=['Time','Mon','Tue','Wed','Thu','Fri','Sat','Sun'];
      grid.innerHTML='';
      days.forEach(d=>{
        const div=document.createElement('div');
        div.className='grid-header';
        div.textContent=d;
        grid.appendChild(div);
      });
      for(let hour=0;hour<24;hour++){
        const label=document.createElement('div');
        label.className='grid-header';
        label.textContent=`${hour}:00`;
        grid.appendChild(label);
        for(let day=0;day<7;day++){
          const cell=document.createElement('div');
          cell.className='grid-cell';
          cell.dataset.day=day; cell.dataset.hour=hour;
          cell.addEventListener('mousedown',handleCellClick);
          cell.addEventListener('mouseover',handleCellDrag);
          grid.appendChild(cell);
        }
      }
    }
    let isDragging=false; let currentActivity='study';
    document.addEventListener('mousedown',()=>isDragging=true);
    document.addEventListener('mouseup',()=>isDragging=false);
    
    function handleCellClick(e){
      const cell=e.target;
      if(e.button === 2) { // Right click to remove
        cell.className='grid-cell';
        updateStats();
        return;
      }
      
      // Don't allow overwriting work/sleep
      if(cell.classList.contains('work') || cell.classList.contains('sleep')) {
        return;
      }
      
      const activity=currentActivity;
      const wasSelected=cell.classList.contains(activity);
      cell.className='grid-cell';
      if(!wasSelected) cell.classList.add(activity);
      updateStats();
    }
    
    function handleCellDrag(e){
      if(!isDragging) return;
      const cell=e.target;
      if(!cell.classList.contains('grid-cell')) return;
      
      // Don't allow overwriting work/sleep
      if(cell.classList.contains('work') || cell.classList.contains('sleep')) {
        return;
      }
      
      cell.className='grid-cell '+currentActivity;
      updateStats();
    }
    
    // Prevent context menu on right click
    document.addEventListener('contextmenu', e => {
      if(e.target.classList.contains('grid-cell')) {
        e.preventDefault();
      }
    });
    // Add event listeners only after elements exist
    function addPlannerEventListeners() {
      const activitySelect = document.getElementById('activitySelect');
      const clearAll = document.getElementById('clearAll');
      const clearPersonal = document.getElementById('clearPersonal');
      const smartSuggest = document.getElementById('smartSuggest');
      
      if(activitySelect) {
        activitySelect.addEventListener('change',e=>{
          currentActivity=e.target.value;
        });
      }
      
      if(clearAll) {
        clearAll.addEventListener('click',()=>{
          if(confirm('This will clear your entire schedule. Are you sure?')) {
            document.querySelectorAll('.grid-cell').forEach(c=>c.className='grid-cell');
            updateStats();
          }
        });
      }
      
      if(clearPersonal) {
        clearPersonal.addEventListener('click',()=>{
          document.querySelectorAll('.grid-cell').forEach(c=>{
            if(!c.classList.contains('work') && !c.classList.contains('sleep')) {
              c.className='grid-cell';
            }
          });
          updateStats();
        });
      }
      
      if(smartSuggest) {
        smartSuggest.addEventListener('click',()=>{
          smartSuggestSchedule();
        });
      }
    }
    
    // Auto-populate schedule based on selections
    function populateSchedule(workType, sleepType) {
      // Clear existing schedule first
      document.querySelectorAll('.grid-cell').forEach(c=>c.className='grid-cell');
      
      // Schedule work Monday-Friday
      const workHours = getWorkHours(workType);
      for(let day = 0; day < 5; day++) { // Mon-Fri
        for(let hour = workHours.start; hour < workHours.end; hour++) {
          const cell = document.querySelector(`[data-day="${day}"][data-hour="${hour}"]`);
          if(cell) cell.classList.add('work');
        }
      }
      
      // Schedule sleep every night
      const sleepHours = getSleepHours(sleepType);
      for(let day = 0; day < 7; day++) { // Every day
        for(let hour = sleepHours.start; hour <= sleepHours.end; hour++) {
          let actualHour = hour;
          if(hour >= 24) actualHour = hour - 24; // Handle midnight crossover
          const cell = document.querySelector(`[data-day="${day}"][data-hour="${actualHour}"]`);
          if(cell) cell.classList.add('sleep');
        }
      }
      
      updateStats();
    }
    
    function getWorkHours(workType) {
      const schedules = {
        'part-time': {start: 9, end: 13},      // 4 hours
        'short': {start: 9, end: 15},          // 6 hours  
        'standard': {start: 9, end: 17},       // 8 hours
        'extended': {start: 8, end: 18},       // 10 hours
        'long': {start: 8, end: 20}            // 12 hours
      };
      return schedules[workType] || schedules.standard;
    }
    
    function getSleepHours(sleepType) {
      const schedules = {
        'short': {start: 24, end: 6},          // 6 hours (12am-6am)
        'light': {start: 24, end: 7},          // 7 hours (12am-7am)
        'standard': {start: 23, end: 7},       // 8 hours (11pm-7am)
        'good': {start: 22, end: 7},           // 9 hours (10pm-7am)
        'excellent': {start: 21, end: 7}       // 10 hours (9pm-7am)
      };
      return schedules[sleepType] || schedules.standard;
    }
    function updateStats(){
      const cells=document.querySelectorAll('.grid-cell');
      const countBy={study:0,work:0,sleep:0,family:0,social:0,other:0};
      cells.forEach(c=>{
        if(c.classList.length>1){
          const act=c.classList[1];
          if(countBy[act] !== undefined) countBy[act]++;
        }
      });
      
      // Calculate available time (total - work - sleep - personal commitments)
      const personalCommitments = countBy.family + countBy.social + countBy.other;
      const totalScheduled = countBy.work + countBy.sleep + personalCommitments;
      const available = 168 - totalScheduled;
      
      document.getElementById('weeklyHours').textContent = available + 'h';
      document.getElementById('dailyHours').textContent = (available/7).toFixed(1) + 'h';
      document.getElementById('monthlyHours').textContent = (available*4.33).toFixed(0) + 'h';
      
      // Update detailed breakdown
      updateActivityBreakdown(countBy, available);
    }
    
    function updateActivityBreakdown(counts, available) {
      const breakdown = document.getElementById('activityBreakdown');
      const stats = document.getElementById('scheduleStats');
      
      breakdown.innerHTML = `
        <div style="text-align:center;">
          <div style="font-size:24px; font-weight:700; color:#e52d27;">${counts.work}h</div>
          <div style="font-size:12px; color:#666;">Work</div>
        </div>
        <div style="text-align:center;">
          <div style="font-size:24px; font-weight:700; color:#6c757d;">${counts.sleep}h</div>
          <div style="font-size:12px; color:#666;">Sleep</div>
        </div>
        <div style="text-align:center;">
          <div style="font-size:24px; font-weight:700; color:#28a745;">${counts.study}h</div>
          <div style="font-size:12px; color:#666;">Study</div>
        </div>
        <div style="text-align:center;">
          <div style="font-size:24px; font-weight:700; color:#ff6b6b;">${counts.family}h</div>
          <div style="font-size:12px; color:#666;">Family</div>
        </div>
        <div style="text-align:center;">
          <div style="font-size:24px; font-weight:700; color:#ffc107;">${counts.social}h</div>
          <div style="font-size:12px; color:#666;">Social</div>
        </div>
        <div style="text-align:center;">
          <div style="font-size:24px; font-weight:700; color:#96ceb4;">${counts.other}h</div>
          <div style="font-size:12px; color:#666;">Other</div>
        </div>
        <div style="text-align:center; border-left:2px solid #28a745; padding-left:10px;">
          <div style="font-size:24px; font-weight:700; color:#28a745;">${available}h</div>
          <div style="font-size:12px; color:#666;">Free Time</div>
        </div>
      `;
      
      stats.style.display = 'block';
    }
    
    function smartSuggestSchedule() {
      // Clear personal commitments first
      document.querySelectorAll('.grid-cell').forEach(c=>{
        if(!c.classList.contains('work') && !c.classList.contains('sleep')) {
          c.className='grid-cell';
        }
      });
      
      // Smart suggestions based on typical student patterns
      const suggestions = [
        // Study sessions in morning/evening when free
        {activity: 'study', days: [0,1,2,3,4], hours: [7,8], weight: 0.8}, // Early morning study
        {activity: 'study', days: [0,1,2,3,4], hours: [18,19,20], weight: 0.9}, // Evening study
        {activity: 'study', days: [5,6], hours: [9,10,11,14,15,16], weight: 0.7}, // Weekend study
        
        // Family time
        {activity: 'family', days: [6], hours: [12,13], weight: 0.6}, // Sunday lunch
        {activity: 'family', days: [0,1,2,3,4], hours: [19], weight: 0.4}, // Weekday dinner
        
        // Social time
        {activity: 'social', days: [5], hours: [20,21,22], weight: 0.7}, // Friday night
        {activity: 'social', days: [6], hours: [17,18], weight: 0.5}, // Saturday evening
        
        // Other commitments (errands, gym, etc.)
        {activity: 'other', days: [6], hours: [10,11], weight: 0.3}, // Saturday morning errands
      ];
      
      suggestions.forEach(suggestion => {
        suggestion.days.forEach(day => {
          suggestion.hours.forEach(hour => {
            if(Math.random() < suggestion.weight) {
              const cell = document.querySelector(`[data-day="${day}"][data-hour="${hour}"]`);
              if(cell && !cell.classList.contains('work') && !cell.classList.contains('sleep')) {
                cell.classList.add(suggestion.activity);
              }
            }
          });
        });
      });
      
      updateStats();
      
      // Show a helpful message
      setTimeout(() => {
        alert('✨ Smart suggestions applied! This is based on typical student patterns. Feel free to customize further by clicking and dragging on the calendar.');
      }, 300);
    }
    document.addEventListener('DOMContentLoaded',initWeeklyGrid);
  </script>
</body>
</html>
